	IN 10H
START:
	MVI A,0DH		
	SIM			
	EI			;RTS 6.5 routine

INF:
	JMP INF
	
INTR_ROUTINE:
	MVI C,61H
	LXI H,0B06H		;IN ORDER TO HAVE EMPTY SPACES 
	MVI M,10H		;AND NOT 0'S IN THE OTHER POSITIONS 
	LXI H,0B07H		;OF THE 7 SEGMENT DISPLAY
	MVI M,10H
	LXI H,0B08H
	MVI M,10H
	LXI H,0B09H
	MVI M,10H
LEDS_ON:
	MVI B,00H
	MVI A,00H
	STA 3000H		;TURN ON FOR 1/2 SEC 
	EI			;ENABLE INTERRUPTS

FIX_TIMER:

 	DCR C			;C <- C - 1
	MOV A,C		
	CPI 00H
	JZ INF
	MOV A,C		; IF SUB LEADS TO RESULT F THEN DECREASE BY 6 
	ANI 0FH		; 9 AS A DECIMAL BEHAVES
	CPI 0FH		; IF WE HAVE F AS SECOND DIGIT GO TO DECIMAL_DECR 
	JZ FIX_FS
	JMP PRINT

LEDS_OFF:
	MVI B,11H
	MVI A,FFH
	STA 3000H		;TURN OFF FOR 1/2 SEC
	JMP PRINT

FIX_FS:

	MOV A,C
	SUI 06H		;DECR BY 6 
	MOV C,A

PRINT:
	INR B
	MOV A,B		;STORE B IN A FOR COMPARISONS 
	CPI 10H
	JZ LEDS_OFF		
	CPI 20H 
	JZ LEDS_ON 
	MOV D,C		;STORE C TEMPORARILY IN D
	MVI B,01H		;FIXING THE DELAY TO BE 01F4H = 500ms IN DECIMAL = 1/2 SEC
	MVI C,F4H
	CALL DELB		;DELB ROUTINE
	MOV C,D		;RESTORE C
	MOV B,A		;RESTORE B 
	LXI H,0B04H
	MOV A,C		;STORE C IN A
	ANI 0FH		;ISOLATE THE 4 LSB'S
	MOV M,A		;STORE A IN MEMORY (HL)
	INX H			
	MOV A,C		;STORE C IN A 
	ANI F0H		;ISOLATE THE 4 MSB'S
	RRC			;SHIFT LSB'S
	RRC
	RRC
	RRC			
	MOV M,A		;STORE A IN MEMORY (HL)
	LXI D,0B04H		;DISPLAY THEM
	CALL STDM
	CALL DCD
	JMP PRINT
	
END